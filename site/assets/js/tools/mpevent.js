function checkSource(){var t=sysGetCookie("referer");return void 0===t?{"Advertising platform":"Direct entry"}:void 0===mix.platforms[t]?{"Advertising platform":"Direct entry"}:"object"==typeof mix.platforms[t]?mix.platforms[t]:{"Advertising platform":mix.platforms[t]}}function mpeventID(t,e,n,r){var i={id:t};return $.extend(i,e),new MPEvent(i,n,r)}var MPEvent=function(t,e,n){t=this.applyBodyOptions(t);var r=$('meta[name="MPEventProperties"]').data("mpevent-properties"),i=t.props;$.extend(i,r),t.props=i,this.event=t,this.callback=n,this.url="/mp/track",this.getToProps=["utm_source","utm_medium","utm_campaign"],this.defaultProps={$screen_width:screen.width,$screen_height:screen.height,"Client Height":$(window).width(),"Client Width":$(window).height()},e&&this.track()};MPEvent.prototype.applyBodyOptions=function(t){var e=$("body").prop("class");e=e.split(" ");var n=[];for(var r in e)-1!==e[r].indexOf("option-")&&n.push(e[r].replace("option-",""));return void 0===t.props?t.props={Options:n.join(",")}:t.props.Options=n.join(","),t},MPEvent.prototype.setEvent=function(t){return this.event.event=event,this},MPEvent.prototype.setProperties=function(t){return this.event.properties=t,this},MPEvent.prototype.track=function(){"true"!=sysGetCookie("mixpanel_ignore")?this.sendRequest(this.event,this.url):this.callback&&this.callback()},MPEvent.prototype.sendRequest=function(t,e){var n={event:t.event,id:t.id,properties:this.mergeProperties(t.props)};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:e,data:n,method:"POST"}).always(function(){this.callback&&this.callback()}.bind(this))},MPEvent.prototype.mergeProperties=function(t){var e=this.getQuery();if(e)for(var n in this.getToProps){var r=this.getToProps[n];e[r]&&(this.defaultProps[r]=e[r])}return $.extend(this.defaultProps,t),this.defaultProps},MPEvent.prototype.getQuery=function(){var t,e,n,r,i={};for(t=window.location.search.replace("?","").split("&"),n=0,r=t.length;n<r;n++)e=t[n].split("="),i[e[0]]=e[1];return i},$.fn.mpeventLink=function(){var t=$(this),e=t.data(),n={};for(key in e)if("mpevent"!=key){var r=key.replace("mpevent","").replace(/([A-Z])/g," $1").trim();n[r.charAt(0).toUpperCase()+r.slice(1)]=e[key]}var i={id:t.data("mpevent"),event:t.data("mpevent-name"),props:n};if(t.text().length>0&&(i.props.Text=t.text()),void 0!==t.attr("href")&&"_blank"!=t.attr("target")&&0!=t.attr("href").indexOf("#")){return new MPEvent(i,!1,function(){t.attr("href")&&(window.location.href=t.attr("href"))}.bind(t)).track(),!1}new MPEvent(i,!0)},$(function(){setTimeout(function(){new MPEvent({event:"View",props:checkSource()},!0)},1e3),setTimeout(function(){"true"!=sysGetCookie("retained")&&(sysSetCookie("retained",!0,{expires:86400,path:"/"}),new MPEvent({event:"Retain"},!0))},15e3),$(document).on("click","[data-mpevent]",$(this).mpeventLink)});